Prompt para Replit - Sistema POS Unificado
Crea un Sistema de Punto de Venta (POS) completo y moderno con las siguientes especificaciones:

## STACK TECNOLGICO
- Frontend: Next.js 14+ con App Router
- Lenguaje: TypeScript (tipado estricto)
- UI: React 18+ con Tailwind CSS
- Backend: Supabase (PostgreSQL, Auth, Storage, Edge Functions)
- Hosting: Vercel
- IA de Voz: ElevenLabs API para reconocimiento y s铆ntesis de voz

## FUNCIONALIDADES PRINCIPALES

### 1. MDULO DE PUNTO DE VENTA
- Interfaz t谩ctil optimizada para tablets, m贸viles y desktop
- B煤squeda inteligente de productos con autocompletado
- **Sistema de 贸rdenes por voz con IA:**
  - Bot贸n de "Ordenar por Voz" en la interfaz principal
  - Integraci贸n con ElevenLabs para reconocimiento de voz
  - Procesamiento inteligente de 贸rdenes naturales (ej: "agrega 3 coca colas y 2 sabritas")
  - Confirmaci贸n visual y auditiva de productos agregados
  - Manejo de correcciones por voz (ej: "quita las sabritas", "cambia a 5 coca colas")
- Carrito de compras con c谩lculo autom谩tico
- Gesti贸n de descuentos y promociones
- M煤ltiples m茅todos de pago (efectivo, tarjeta, transferencia)
- Ventas a cr茅dito con l铆mite personalizado
- Modo offline con sincronizaci贸n autom谩tica
- Impresi贸n de tickets

### 2. MDULO DE INVENTARIO
- Cat谩logo de productos con capacidad de 190,000+ art铆culos
- Importaci贸n masiva desde Excel/CSV
- Control de stock en tiempo real
- Alertas de inventario bajo
- Gesti贸n de lotes y fechas de caducidad
- M煤ltiples listas de precios (p煤blico, mayoreo, VIP)
- Categor铆as y subcategor铆as
- C贸digo de barras y SKU
- Im谩genes de productos

### 3. MDULO DE CLIENTES
- Base de datos completa de clientes
- Sistema de puntos y recompensas
- Historial de compras detallado
- Cuentas por cobrar y cr茅dito
- Estados de cuenta
- Recordatorios de pago autom谩ticos
- Segmentaci贸n de clientes

### 4. MDULO DE REPORTES Y ANALTICAS
- Dashboard ejecutivo con KPIs en tiempo real
- Ventas por producto, categor铆a, cajero y sucursal
- Gr谩ficas interactivas (Chart.js o Recharts)
- Productos m谩s vendidos y de menor rotaci贸n
- Reportes de utilidad y m谩rgenes
- Exportaci贸n a PDF y Excel
- Env铆o autom谩tico por email

### 5. MDULO DE EMPLEADOS
- Gesti贸n de usuarios y roles
- Control de accesos por permisos
- Registro de entradas/salidas
- Comisiones por venta
- Historial de operaciones por cajero

### 6. MDULO DE FACTURACIN ELECTRNICA (Preparado)
- Estructura para integraci贸n con PAC
- Generaci贸n de CFDI 4.0
- Almacenamiento de XML y PDF
- Env铆o autom谩tico al cliente

### 7. SISTEMA DE VOZ INTELIGENTE (PRIORIDAD)
Crea un componente `VoiceOrderSystem` con:
```typescript
// Funcionalidades del sistema de voz:
- Activaci贸n con bot贸n " Ordenar por Voz"
- Estado visual del micr贸fono (escuchando/procesando/inactivo)
- Integraci贸n con ElevenLabs API para:
  * Speech-to-Text (transcripci贸n de audio)
  * Procesamiento de lenguaje natural para entender 贸rdenes
  * Text-to-Speech para confirmaciones auditivas
- Comandos soportados:
  * "Agrega [cantidad] [nombre producto]"
  * "Quita [nombre producto]"
  * "Cambia [producto] a [cantidad]"
  * "Busca [nombre producto]"
  * "Cu谩nto es el total"
  * "Finalizar venta"
  * "Cancelar orden"
- B煤squeda inteligente y tolerante a errores en nombres de productos
- Confirmaci贸n visual y auditiva de cada acci贸n
- Manejo de ambig眉edades (si hay varios productos similares, preguntar)
- Feedback visual en tiempo real de lo que se est谩 escuchando
```

## ARQUITECTURA DE BASE DE DATOS

Crea las siguientes tablas en Supabase:

### products
- id (uuid, primary key)
- sku (text, unique)
- barcode (text, unique, nullable)
- name (text)
- description (text, nullable)
- category_id (uuid, foreign key)
- price (decimal)
- cost (decimal)
- stock (integer)
- min_stock (integer)
- max_stock (integer)
- image_url (text, nullable)
- active (boolean)
- created_at (timestamp)
- updated_at (timestamp)

### categories
- id (uuid, primary key)
- name (text)
- parent_id (uuid, foreign key, nullable)
- active (boolean)

### customers
- id (uuid, primary key)
- name (text)
- email (text, unique, nullable)
- phone (text, nullable)
- address (text, nullable)
- credit_limit (decimal)
- credit_balance (decimal)
- points (integer)
- active (boolean)
- created_at (timestamp)

### sales
- id (uuid, primary key)
- sale_number (text, unique)
- customer_id (uuid, foreign key, nullable)
- user_id (uuid, foreign key)
- subtotal (decimal)
- discount (decimal)
- tax (decimal)
- total (decimal)
- payment_method (text)
- status (text)
- created_at (timestamp)

### sale_items
- id (uuid, primary key)
- sale_id (uuid, foreign key)
- product_id (uuid, foreign key)
- quantity (integer)
- unit_price (decimal)
- subtotal (decimal)
- discount (decimal)

### users
- id (uuid, primary key)
- email (text, unique)
- name (text)
- role (text)
- active (boolean)
- created_at (timestamp)

## CARACTERSTICAS TCNICAS

### Seguridad
- Row Level Security (RLS) en todas las tablas
- Autenticaci贸n JWT con Supabase Auth
- Encriptaci贸n de datos sensibles
- Rate limiting
- Validaci贸n de inputs
- Sanitizaci贸n de datos

### Performance
- Server Components de Next.js para mejor rendimiento
- Lazy loading de im谩genes
- Cach茅 inteligente
- Paginaci贸n en listas grandes
- Optimistic updates

### UX/UI
- Dise帽o responsive (mobile-first)
- Sistema de dise帽o consistente con Tailwind
- Modo oscuro/claro
- Temas de color personalizables
- Animaciones suaves
- Feedback visual inmediato
- Accesibilidad (WCAG 2.1)

### Modo Offline
- Service Worker para cach茅
- IndexedDB para almacenamiento local
- Cola de sincronizaci贸n
- Indicador de estado de conexi贸n

## ESTRUCTURA DEL PROYECTO
/app
/api
/elevenlabs
/speech-to-text
/text-to-speech
/(auth)
/login
/register
/(dashboard)
/pos
/inventory
/customers
/sales
/reports
/settings
/components
/pos
/VoiceOrderSystem.tsx
/ProductSearch.tsx
/Cart.tsx
/PaymentModal.tsx
/inventory
/customers
/ui (componentes reutilizables)
/lib
/supabase
/elevenlabs
/utils
/hooks
/useVoiceOrders.ts
/useProducts.ts
/useSales.ts
/types
/database.ts
/api.ts

## CONFIGURACIN INICIAL

1. Instalar dependencias necesarias:
   - @supabase/supabase-js
   - @supabase/auth-helpers-nextjs
   - elevenlabs-api (para integraci贸n de voz)
   - recharts (gr谩ficas)
   - react-hook-form + zod (formularios)
   - date-fns (manejo de fechas)
   - jspdf (exportaci贸n PDF)
   - xlsx (importaci贸n/exportaci贸n Excel)

2. Configurar variables de entorno:
   - NEXT_PUBLIC_SUPABASE_URL
   - NEXT_PUBLIC_SUPABASE_ANON_KEY
   - SUPABASE_SERVICE_ROLE_KEY
   - ELEVENLABS_API_KEY
   - NEXT_PUBLIC_APP_URL

3. Implementar primero el MVP con:
   - Sistema de autenticaci贸n
   - M贸dulo POS b谩sico con b煤squeda de productos
   - **Sistema de 贸rdenes por voz completamente funcional**
   - Carrito de compras
   - Finalizaci贸n de venta
   - Inventario b谩sico

4. Priorizar la funcionalidad de voz:
   - Crear hook personalizado `useVoiceOrders`
   - Implementar servicio de ElevenLabs
   - Crear UI intuitiva para el micr贸fono
   - Implementar l贸gica de procesamiento de lenguaje natural
   - Agregar confirmaciones auditivas

## INSTRUCCIONES ESPECIALES PARA EL SISTEMA DE VOZ

1. El sistema debe poder entender 贸rdenes en espa帽ol natural
2. Debe ser tolerante a variaciones en los nombres de productos
3. Implementar b煤squeda fuzzy para encontrar productos aunque no se pronuncien exactamente
4. Dar feedback auditivo usando Text-to-Speech de ElevenLabs
5. Mostrar transcripci贸n en tiempo real
6. Permitir correcciones por voz antes de confirmar
7. Implementar timeout de escucha (ej: 5 segundos de silencio)
8. Manejar errores gracefully con mensajes claros

Empieza creando la estructura base del proyecto, luego implementa el sistema de autenticaci贸n, despu茅s el m贸dulo POS b谩sico con 茅nfasis en el sistema de voz, y finalmente los dem谩s m贸dulos seg煤n prioridad.
Este prompt incluye todas las especificaciones de la propuesta m谩s el sistema de 贸rdenes por voz con IA usando ElevenLabs. El sistema de voz est谩 dise帽ado para ser intuitivo y permitir que los cajeros puedan agregar productos al carrito usando comandos de voz naturales en espa帽ol.